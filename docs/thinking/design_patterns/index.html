<!doctype html>
<html class="docs-version-current" lang="zh-Hans" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TRAVIS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TRAVIS Atom Feed"><title data-react-helmet="true">设计模式 | TRAVIS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hondrytravis.github.io//docs/thinking/design_patterns"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-Hans"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="设计模式 | TRAVIS"><meta data-react-helmet="true" name="description" content="设计模式为了解决构建大型应用的健壮性和可维护性。目前已知的高达 23 种。"><meta data-react-helmet="true" property="og:description" content="设计模式为了解决构建大型应用的健壮性和可维护性。目前已知的高达 23 种。"><link data-react-helmet="true" rel="shortcut icon" href="/images/default/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hondrytravis.github.io//docs/thinking/design_patterns"><link data-react-helmet="true" rel="alternate" href="https://hondrytravis.github.io//docs/thinking/design_patterns" hreflang="zh-Hans"><link data-react-helmet="true" rel="alternate" href="https://hondrytravis.github.io//docs/thinking/design_patterns" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.673bc2ec.css">
<link rel="preload" href="/assets/js/runtime~main.261a0b30.js" as="script">
<link rel="preload" href="/assets/js/main.d8aec2c2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar--dark navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Better Late Than Never</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">博客</a><a class="navbar__item navbar__link" href="/algorithm/">算法</a><a class="navbar__item navbar__link" href="/open_source/"> 开源贡献</a><a class="navbar__item navbar__link" href="/blog">阅读</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/HondryTravis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>Better Late Than Never</b></a><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">博客</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Typescript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Wasm</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTML | CSS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Webpack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Node</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">前端工程化</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">性能优化</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">编程思想</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/aop">面向切面编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/functional_programming">函数式编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/thinking/design_patterns">设计模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/ioc">控制反转 | Ioc</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTTP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Nginx</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Java</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据库</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">其他常用工具</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>设计模式</h1></header><p>设计模式为了解决构建大型应用的健壮性和可维护性。目前已知的高达 23 种。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="单例模式">单例模式<a aria-hidden="true" class="hash-link" href="#单例模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="定义">定义<a aria-hidden="true" class="hash-link" href="#定义" title="标题的直接链接">​</a></h3><p>单例模式，也叫单子模式，是一种常用的软件设计模式，属于创建型模式的一种 <strong>保证一个类仅有一个实例，并提供一个访问它的全局访问点</strong>。在应用这个模式时，单例对象的类必须保证只有一个实例存在。许多时候整个系统只需要拥有一个的全局对象，这样有利于我们协调系统整体的行为。比如在某个服务器程序中，该服务器的配置信息存放在一个文件中，这些配置数据由一个单例对象统一读取，然后服务进程中的其他对象再通过这个单例对象获取这些配置信息。这种方式简化了在复杂环境下的配置管理。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="实现思路">实现思路<a aria-hidden="true" class="hash-link" href="#实现思路" title="标题的直接链接">​</a></h3><p>一个类能返回对象一个引用(永远是同一个)和一个获得该实例的方法（必须是静态方法，通常使用getInstance这个名称）；当我们调用这个方法时，如果类持有的引用不为空就返回这个引用，如果类保持的引用为空就创建该类的实例并将实例的引用赋予该类保持的引用；同时我们还将该类的构造函数定义为私有方法，这样其他处的代码就无法通过调用该类的构造函数来实例化该类的对象，只有通过该类提供的静态方法来得到该类的唯一实例。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="构建方式">构建方式<a aria-hidden="true" class="hash-link" href="#构建方式" title="标题的直接链接">​</a></h3><ul><li>懒汉方式。指全局的单例实例在第一次被使用时构建。</li><li>饿汉方式。指全局的单例实例在类装载时构建。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">/* 懒汉模式 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> instance</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token function" style="color:#00E673">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">instance</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">==</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">instance</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">instance</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">test</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;单例&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> xx </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> xx2 </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// xx.test();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">xx </span><span class="token operator" style="color:#FF69B4">==</span><span class="token plain"> xx2</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">/* 饿汉模式 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> instance</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token function" style="color:#00E673">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">instance</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">test</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;单例&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> xx </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> xx2 </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Singleton</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getInstance</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// xx.test();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">xx </span><span class="token operator" style="color:#FF69B4">==</span><span class="token plain"> xx2</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="工程模式">工程模式<a aria-hidden="true" class="hash-link" href="#工程模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="简述">简述<a aria-hidden="true" class="hash-link" href="#简述" title="标题的直接链接">​</a></h3><p>在面向对象程序设计中，工厂通常是一个用来创建其他对象的对象。工厂是构造方法的抽象，用来实现不同的分配方案。</p><p>工厂对象通常包含一个或多个方法，用来创建这个工厂所能创建的各种类型的对象。这些方法可能接收参数，用来指定对象创建的方式，最后返回创建的对象。</p><p>有时，特定类型对象的控制过程比简单地创建一个对象更复杂。在这种情况下，工厂对象就派上用场了。工厂对象可能会动态地创建产品类的对象，或者从对象池中返回一个对象，或者对所创建的对象进行复杂的配置，或者应用其他的操作。</p><p>这些类型的对象很有用。几个不同的设计模式都应用了工厂的概念，并可以使用在很多语言中。例如，在《设计模式》一书中，像工厂方法模式、抽象工厂模式、生成器模式，甚至是单例模式都应用了工厂的概念。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-1">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-1" title="标题的直接链接">​</a></h3><p>简单来讲就是隐藏了 new 的过程</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">/* 工厂模式 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">abstract</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">abstract</span><span class="token plain"> </span><span class="token function" style="color:#00E673">say</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Women</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">say</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;我是女的&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Man</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">say</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;我是男的&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">God</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token constant" style="color:#BD93F9">TYPE_MAN</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token constant" style="color:#BD93F9">TYPE_WOMEN</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">TYPE_Animal</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token function" style="color:#00E673">createPerson</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">type</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">type</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">God</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">TYPE_MAN</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">                </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Man</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">God</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">TYPE_WOMEN</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">                </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Women</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token comment" style="color:#737373">// switch 穿透</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">God</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_Animal</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">default</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">                </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Man</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> man </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">God</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">createPerson</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token maybe-class-name" style="color:#00bfff">God</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">TYPE_MAN</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">man</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">say</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="代理模式">代理模式<a aria-hidden="true" class="hash-link" href="#代理模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="简述-1">简述<a aria-hidden="true" class="hash-link" href="#简述-1" title="标题的直接链接">​</a></h3><p>代理模式（英语：Proxy Pattern）是程序设计中的一种设计模式。</p><p>所谓的代理者是指一个类别可以作为其它东西的接口。代理者可以作任何东西的接口：网络连接、存储器中的大对象、文件或其它昂贵或无法复制的资源。</p><p>著名的代理模式例子为引用计数（英语：reference counting）指针对象。</p><p>当一个复杂对象的多份副本须存在时，代理模式可以结合享元模式以减少存储器用量。典型作法是创建一个复杂对象及多个代理者，每个代理者会引用到原本的复杂对象。而作用在代理者的运算会转送到原本对象。一旦所有的代理者都不存在时，复杂对象会被移除。</p><p>简单来讲，为一个对象提供一个代用品或占位符，以便控制对它的访问。很多明星都有自己经纪人，比如开演唱会，经纪人会代替明星细节和谈好报酬乏后再跟明星签合同。即核心是当客户不方便直接访问一个对象或者不满足需要的时候，提供一个替身对象控制这个对象的访问，替身对家对请求最初一些处理之后再把请求转交给本体对象。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-2">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-2" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token keyword" style="color:#FF69B4">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">save</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">User</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">save</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;执行成功 congratulations！&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">DirectorProxy</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> target</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">target</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IDirector</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">target</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> target</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">save</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;🐼 开始执行事务……&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">target</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">save</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;🍎 事务结束&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> user</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">User</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> directorProxy</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IDirector</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">DirectorProxy</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">directorProxy</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">save</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="命令模式">命令模式<a aria-hidden="true" class="hash-link" href="#命令模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="简述-2">简述<a aria-hidden="true" class="hash-link" href="#简述-2" title="标题的直接链接">​</a></h3><p>命令模式中的命令指的是一个执行某些特定事情的指令，有时候需要向某些特定事情的指令。常见的应用场景有时候需要向某些对家发送请求，但是并不知道请求的接受者是谁，也不知道被请求的操作是什么。假如我们去快餐店，可以点餐、取消、但是我们并不用关心厨师是谁底么做。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-3">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-3" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">// 定义接受者</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Receiver</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">action</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;执行操作&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 抽象命令角色类</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ICommand</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">exec</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 具体命令角色类</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteCommand</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ICommand</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> receiver</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Receiver</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token operator" style="color:#FF69B4">!</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">receiver</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Receiver</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">receiver</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> receiver</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">exec</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">receiver</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">action</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 角色类</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Invoker</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> command</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Command</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">command</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Command</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">command</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> command</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">action</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">command</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">exec</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> receiver</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Receiver</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Receiver</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> command</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Command</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteCommand</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">receiver</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> invoker</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Invoker</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Invoker</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">command</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">invoker</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">action</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="观察者模式">观察者模式<a aria-hidden="true" class="hash-link" href="#观察者模式" title="标题的直接链接">​</a></h2><p>在此种模式中，一个目标对象管理所有相依于它的观察者对象，并且在它本身的状态改变时主动发出通知。</p><p>这通常透过呼叫各观察者所提供的方法来实现。此种模式通常被用来实时事件处理系统</p><p>观察者模式有四个角色：抽象目标、具体目标、抽象观察者、具体观察者。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="抽象目标">抽象目标<a aria-hidden="true" class="hash-link" href="#抽象目标" title="标题的直接链接">​</a></h3><p>此抽象类别提供一个界面让观察者进行添附与解附作业。此类别内有个不公开的观察者串联，并透过下列函式(方法)进行作业</p><ul><li>添附(Attach)：新增观察者到串联内，以追踪目标对象的变化。</li><li>解附(Detach)：将已经存在的观察者从串联中移除。</li><li>通知(Notify)：利用观察者所提供的更新函式来通知此目标已经产生变化。</li></ul><p>添附函式包涵了一个观察者对象参数。也许是观察者类别的虚拟函式(即更新函式)，或是在非面向对象的设定中所使用的函式指标(更广泛来讲，函式子或是函式对象)</p><p>简单讲：观察者模式(又称为发布-订阅模式)，它定义对家间的一神一对多的依赖关系，当一个对象的状态发主改变时，所有依赖它的对象都将得到通和。现实主活中，如我们去售楼中心服务人员A接待我们，然后再有客户找到A，这个时候暂时没房，等到有房的时候不可能服务人员A挨个打电话通和而是订阅A的公共提醒服务。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="具体目标">具体目标<a aria-hidden="true" class="hash-link" href="#具体目标" title="标题的直接链接">​</a></h3><p>此类别提供了观察者欲追踪的状态。也利用其源类别(例如前述的抽象目标类别)所提供的方法,来通知所有的观察者其状态已经更新。此类别拥有以下函式</p><ul><li>取得状态(GetState)：回传该目标对象的状态</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="抽象观察者">抽象观察者<a aria-hidden="true" class="hash-link" href="#抽象观察者" title="标题的直接链接">​</a></h3><p>抽象观察者类别是一个必须被实做的抽象类别。这个类别定义了所有观察者都拥有的更新用界面，此界面是用来接收目标类别所发出的更新通知。此类别含有以下函式</p><ul><li>更新(Update)：会被实做的一个抽象(虚拟)函式</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="观察者">观察者<a aria-hidden="true" class="hash-link" href="#观察者" title="标题的直接链接">​</a></h3><p>这个类别含有指向目标类别的参考(reference)，以接收来自目标类别的更新状态。此类别含有以下函式</p><ul><li>更新(Update)：是前述抽象函式的实做。当这个函式被目标对象呼叫时，观察者对象将会呼叫目标对象的取得状态函式，来其所拥有的更新目标对象资讯。</li></ul><p>每个观察者类别都要实做它自己的更新函式，以应对状态更新的情形。</p><p>当目标对象改变时，会通过呼叫它自己的通知函式来将通知送给每一个观察者对象，这个通知函式则会去呼叫已经添附在串联内的观察者更新函式。通知与更新函式可能会有一些参数，好指明是目前目标对象内的何种改变。这么作将可增进观察者的效率(只更新那些改变部分的状态)</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="用途">用途<a aria-hidden="true" class="hash-link" href="#用途" title="标题的直接链接">​</a></h3><ul><li>当抽象个体有两个互相依赖的层面时。封装这些层面在单独的对象内将可允许程序员单独地去变更与重复使用这些对象，而不会产生两者之间交互的问题。</li><li>当其中一个对象的变更会影响其他对象，却又不知道多少对象必须被同时变更时。</li><li>当对象应该有能力通知其他对象，又不应该知道其他对象的实做细节时。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="c-实现">C# 实现<a aria-hidden="true" class="hash-link" href="#c-实现" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">// observe.cs</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">namespace observe</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public abstract class IObserver</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public abstract void Update();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public abstract class ISubject</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        private List&lt;IObserver&gt; observers = new List&lt;IObserver&gt;();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Add(IObserver observer) =&gt; observers.Add(observer);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Remove(IObserver observer) =&gt; observers.Remove(observer);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Notify()</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            Console.WriteLine(&quot;通知所有更新&quot;);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            foreach (var o in observers) {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">                o.Update();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public class Subject : ISubject</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public string State { get; set; }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public class Observer : IObserver</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        private string _name;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        private string _state;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        private Subject subject;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public Observer(Subject sub, string name)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            subject = sub;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            _name = name;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public override void Update()</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            _state = subject.State;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">// Program.cs</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">namespace observe</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class Program</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        static void Main(string[] args)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            var subject = new Subject();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            subject.Add(new Observer(subject, &quot;1&quot;));</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            subject.Add(new Observer(subject, &quot;2&quot;));</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            subject.State = &quot;changed&quot;;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            subject.Notify();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-4">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-4" title="标题的直接链接">​</a></h3><p>杂志订阅服务</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token keyword" style="color:#FF69B4">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IObservable</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">update</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">version</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ISubscribe</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">add</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> obj</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IObservable</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">delete</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">notify</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">MagazineSubscribe</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ISubscribe</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> observers</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#00bfff">Map</span><span class="token operator" style="color:#FF69B4">&lt;</span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IObservable</span><span class="token operator" style="color:#FF69B4">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name" style="color:#00bfff">Map</span><span class="token class-name operator" style="color:#FF69B4">&lt;</span><span class="token class-name builtin" style="color:#8BE9FD">string</span><span class="token class-name punctuation" style="color:#FF69B4">,</span><span class="token class-name" style="color:#00bfff"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IObservable</span><span class="token class-name operator" style="color:#FF69B4">&gt;</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> version</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">add</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> obj</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IObservable</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">observers</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token keyword" style="color:#FF69B4">set</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">delete</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">observers</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">has</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">observers</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token keyword" style="color:#FF69B4">delete</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token keyword" style="color:#FF69B4">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name" style="color:#00bfff">Error</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;key not found&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">notify</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">for</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> instance</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">of</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">observers</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> o</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IObservable</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> instance</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            instance</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">update</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">version</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">publish</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">version</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">notify</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">CustomObservable</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IObservable</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> name</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> version</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">update</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">version</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">version</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> version</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;该杂志出新版了，需要购买？&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">buy</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">buy</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token template-string template-punctuation string" style="color:#C3E88D">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#FF69B4">${</span><span class="token template-string interpolation keyword" style="color:#FF69B4">this</span><span class="token template-string interpolation punctuation" style="color:#FF69B4">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#FF69B4">}</span><span class="token template-string string" style="color:#C3E88D">购买了</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#FF69B4">${</span><span class="token template-string interpolation keyword" style="color:#FF69B4">this</span><span class="token template-string interpolation punctuation" style="color:#FF69B4">.</span><span class="token template-string interpolation">version</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#FF69B4">}</span><span class="token template-string string" style="color:#C3E88D">期杂志</span><span class="token template-string template-punctuation string" style="color:#C3E88D">`</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> magzaine </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">MagazineSubscribe</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> k </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">CustomObservable</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;小 K&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> j </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">CustomObservable</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;小 J&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">magzaine</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">add</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;k&#x27;</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain">k</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">magzaine</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">add</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;j&#x27;</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain">j</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">magzaine</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">publish</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">magzaine</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">publish</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="职责链模式">职责链模式<a aria-hidden="true" class="hash-link" href="#职责链模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="简述-3">简述<a aria-hidden="true" class="hash-link" href="#简述-3" title="标题的直接链接">​</a></h3><p>使多个对象都有机会处理请求，从而避免请求的发送者和接受者乏间的耦合关系，将这些关系连成一条链，并沿着这条链传递该请求，直到一个对象处理它为止。现实生活中如我们座公交午人太多，我们把公交卡交给售票员，让前面的人不停的往前递直到售票员刷卡结束</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-5">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-5" title="标题的直接链接">​</a></h3><p>看一个请假的小例子</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token keyword" style="color:#FF69B4">abstract</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> sucesser</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// 定义一个抽象的处理请求的方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">abstract</span><span class="token plain"> </span><span class="token function" style="color:#00E673">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// 获取当前角色的下一个处理者角色</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">sucesser</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// 设置当前角色的下一个处理者角色</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">setNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">sucesser</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">sucesser</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> sucesser</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 班主任处理请假请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">HeadTeacher</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">days </span><span class="token operator" style="color:#FF69B4">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">5</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;班主任同意&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> user </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;同学的请假请求&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;班主任无法处理&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> user </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;同学的请假请求&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// 如果下一个执行者不为空，由下一个执行者执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> nextHandler </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      nextHandler</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token comment" style="color:#737373">// return this.getNextHandler().handlerRequest(user, days);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 院系主任处理请假请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Department</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">days </span><span class="token operator" style="color:#FF69B4">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">30</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;院系主任同意&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> user </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;同学的请假请求&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;院系主任无法处理&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> user </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;同学的请假请求&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> nextHandler </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      nextHandler</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 校级主任处理请假请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Leader</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">days </span><span class="token operator" style="color:#FF69B4">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">30</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;校级主任同意&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> user </span><span class="token operator" style="color:#FF69B4">+</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;同学的请假请求&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">else</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> nextHandler </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      nextHandler</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> days</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token comment" style="color:#737373">// return getNextHandler().handlerRequest(user, days);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">null</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">TYPE_HeadTeacher</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">1</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">TYPE_Department</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">2</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">TYPE_Leader</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">3</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">static</span><span class="token plain"> </span><span class="token function" style="color:#00E673">createHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">type</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8BE9FD">number</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">type</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_HeadTeacher</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">HeadTeacher</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_Department</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Department</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">case</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_Leader</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">default</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Leader</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 获取三个不同的处理者对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> h1</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">createHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_HeadTeacher</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> h2</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">createHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_Department</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> h3</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">Handler</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">createHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token maybe-class-name" style="color:#00bfff">SimpleFactory</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access maybe-class-name" style="color:#00bfff">TYPE_Leader</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 设置角色的处理层次</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">h1</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">h2</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">h2</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setNextHandler</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">h3</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">h1</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">handlerRequest</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;李四&#x27;</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">35</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// console.log(&quot;*************************&quot;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// h2.handlerRequest(&quot;王五&quot;, 15);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// console.log(&quot;*************************&quot;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// h2.handlerRequest(&quot;朱七&quot;, 30);</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="策略模式">策略模式<a aria-hidden="true" class="hash-link" href="#策略模式" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="简述-4">简述<a aria-hidden="true" class="hash-link" href="#简述-4" title="标题的直接链接">​</a></h3><p>策略模式作为一种软件设计模式，指对象有某个行为，但是在不同的场景中，该行为有不同的实现算法。比如每个人都要“交个人所得税”，但是“在美国交个人所得税”和“在中国交个人所得税”就有不同的算税方法。</p><p>策略模式</p><ul><li>定义了一族算法（业务规则）</li><li>封装了每个算法</li><li>这族的算法可互换代替（interchangeable）</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="typescript-实现-6">TypeScript 实现<a aria-hidden="true" class="hash-link" href="#typescript-实现-6" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token keyword" style="color:#FF69B4">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyA</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;我是策略 A&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyB</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;我是策略 B&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyC</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token console class-name" style="color:#00bfff">console</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">log</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;我是策略 C&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Context</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">private</span><span class="token plain"> strategy</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">strategy</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token maybe-class-name" style="color:#00bfff">IStrategy</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">strategy</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> strategy</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">public</span><span class="token plain"> </span><span class="token function" style="color:#00E673">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">strategy</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 策略 A</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> testA </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Context</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyA</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">testA</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> testB </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Context</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyB</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">testB</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> testC </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">Context</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#00bfff">ConcreteStrategyC</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">testC</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">execute</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/HondryTravis/Blog/tree/master/packages/docs/thinking/design_patterns.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">最后<!-- -->由 <b>travis</b> <!-- -->于 <b><time datetime="2022-12-06T11:14:09.000Z">2022/12/6</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/thinking/functional_programming"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« <!-- -->函数式编程</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/thinking/ioc"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">控制反转 | Ioc<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#单例模式" class="table-of-contents__link toc-highlight">单例模式</a><ul><li><a href="#定义" class="table-of-contents__link toc-highlight">定义</a></li><li><a href="#实现思路" class="table-of-contents__link toc-highlight">实现思路</a></li><li><a href="#构建方式" class="table-of-contents__link toc-highlight">构建方式</a></li><li><a href="#typescript-实现" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#工程模式" class="table-of-contents__link toc-highlight">工程模式</a><ul><li><a href="#简述" class="table-of-contents__link toc-highlight">简述</a></li><li><a href="#typescript-实现-1" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#代理模式" class="table-of-contents__link toc-highlight">代理模式</a><ul><li><a href="#简述-1" class="table-of-contents__link toc-highlight">简述</a></li><li><a href="#typescript-实现-2" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#命令模式" class="table-of-contents__link toc-highlight">命令模式</a><ul><li><a href="#简述-2" class="table-of-contents__link toc-highlight">简述</a></li><li><a href="#typescript-实现-3" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#观察者模式" class="table-of-contents__link toc-highlight">观察者模式</a><ul><li><a href="#抽象目标" class="table-of-contents__link toc-highlight">抽象目标</a></li><li><a href="#具体目标" class="table-of-contents__link toc-highlight">具体目标</a></li><li><a href="#抽象观察者" class="table-of-contents__link toc-highlight">抽象观察者</a></li><li><a href="#观察者" class="table-of-contents__link toc-highlight">观察者</a></li><li><a href="#用途" class="table-of-contents__link toc-highlight">用途</a></li><li><a href="#c-实现" class="table-of-contents__link toc-highlight">C# 实现</a></li><li><a href="#typescript-实现-4" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#职责链模式" class="table-of-contents__link toc-highlight">职责链模式</a><ul><li><a href="#简述-3" class="table-of-contents__link toc-highlight">简述</a></li><li><a href="#typescript-实现-5" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li><li><a href="#策略模式" class="table-of-contents__link toc-highlight">策略模式</a><ul><li><a href="#简述-4" class="table-of-contents__link toc-highlight">简述</a></li><li><a href="#typescript-实现-6" class="table-of-contents__link toc-highlight">TypeScript 实现</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">快速了解</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/performance/page_performance_index">如何监控页面性能指标</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/thinking/design_patterns">设计模式</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/thinking/functional_programming">函数式编程</a></li></ul></div><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/algorithm/">算法</a></li></ul></div><div class="col footer__col"><div class="footer__title">开源贡献</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/open_source/cli/tscli">tscli</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/github/indexeddb">Indexeddb</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/github/tinydb_docapi">TinyDB</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/vscode/Simple-dark">Simple dark</a></li><li class="footer__item"><a href="https://github.com/HondryTravis/xs-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>xs-doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/myliang/x-spreadsheet" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>x-spreadsheet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">联系方式</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contact">邮箱 | 联系方式</a></li></ul></div><div class="col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items"><li class="footer__item"><a href="https://kalacloud.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>卡拉云低代码工具<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">AGPL-3.0 Licensed | Copyright © 2020-present HondryTravis, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.261a0b30.js"></script>
<script src="/assets/js/main.d8aec2c2.js"></script>
</body>
</html>