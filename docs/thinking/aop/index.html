<!doctype html>
<html class="docs-version-current" lang="zh-Hans" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TRAVIS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TRAVIS Atom Feed"><title data-react-helmet="true">面向切面编程 | TRAVIS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hondrytravis.github.io//docs/thinking/aop"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-Hans"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="面向切面编程 | TRAVIS"><meta data-react-helmet="true" name="description" content="编程思想逐步提升"><meta data-react-helmet="true" property="og:description" content="编程思想逐步提升"><link data-react-helmet="true" rel="shortcut icon" href="/images/default/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hondrytravis.github.io//docs/thinking/aop"><link data-react-helmet="true" rel="alternate" href="https://hondrytravis.github.io//docs/thinking/aop" hreflang="zh-Hans"><link data-react-helmet="true" rel="alternate" href="https://hondrytravis.github.io//docs/thinking/aop" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.673bc2ec.css">
<link rel="preload" href="/assets/js/runtime~main.261a0b30.js" as="script">
<link rel="preload" href="/assets/js/main.d8aec2c2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar--dark navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Better Late Than Never</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">博客</a><a class="navbar__item navbar__link" href="/algorithm/">算法</a><a class="navbar__item navbar__link" href="/open_source/"> 开源贡献</a><a class="navbar__item navbar__link" href="/blog">阅读</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/HondryTravis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/default/Logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>Better Late Than Never</b></a><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">博客</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Typescript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Wasm</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTML | CSS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Webpack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Node</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">前端工程化</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">性能优化</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">编程思想</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/thinking/aop">面向切面编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/functional_programming">函数式编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/design_patterns">设计模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/thinking/ioc">控制反转 | Ioc</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTTP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Nginx</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Java</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据库</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">其他常用工具</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>面向切面编程</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="编程思想逐步提升">编程思想逐步提升<a aria-hidden="true" class="hash-link" href="#编程思想逐步提升" title="标题的直接链接">​</a></h2><p>面向对象 -&gt; 工程模式 -&gt; 面向切面</p><p><strong>面向对象</strong> 传统方式，需要动态引入类</p><p><strong>工程模式</strong> 业务层不需要具体关注实例到底怎么生成的</p><p><strong>面向切面</strong> 不在写工具类，直接走 ioc 容器中创建好的实例中<strong>取</strong></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>结论</h5></div><div class="admonition-content"><p>oop 是静态的抽象</p><p>aop 是动态的抽象</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="solid设计原则">SOLID设计原则<a aria-hidden="true" class="hash-link" href="#solid设计原则" title="标题的直接链接">​</a></h2><p>solid 为面向对象设计原则中的一种</p><p>程序设计领域， SOLID (单⼀功能、开闭原则、⾥⽒替换、接⼝隔离以及依赖反转)是由罗伯特·C·⻢丁在21世纪早期 引⼊的记忆术⾸字⺟缩略字，指代了⾯向对象编程和⾯向对象设计的五个基本原则。当这些原则被⼀起应⽤时，它们使得⼀个程序员开发⼀个容易进⾏软件维护和扩展的系统变得更加可能SOLID被典型的应⽤在测试驱动开发上，并且是敏捷开发以及⾃适应软件开发的基本原则的重要组成部分</p><p>主要分为：</p><ol><li>[S]<!-- --> Single Responsibility Principle (单⼀功能原则)</li><li>[O]<!-- --> Open Close Principle （开闭原则）</li><li>[L]<!-- --> Liskov Substitution Principle（⾥⽒替换原则）</li><li>[I]<!-- --> Interface Segregation Principle（接⼝隔离原则）</li><li>[D]<!-- --> Dependency Inversion Principle (依赖倒置/反转原则)</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="单功能原则--s">单⼀功能原则 | S<a aria-hidden="true" class="hash-link" href="#单功能原则--s" title="标题的直接链接">​</a></h3><p>单⼀功能原则(Single Responsibility Principle)：单⼀功能原则 认为对象应该仅具有⼀种单⼀功能的概念。换句话说就是 <strong>让⼀个类只做⼀种类型责任</strong> ，当这个类需要承担其他类型的责任的时候，就需要分解这个类。在所有的SOLID原则中，这是⼤多数开发⼈员感到最能完全理解的⼀条。严格来说，这也可能是违反最频繁的⼀条原则了。单⼀责任原则可以看作是低耦合、⾼内聚在⾯向对象原则上的引申，将责任定义为引起变化的原因，以提⾼内聚性来减少引起变化的原因。责任过多，可能引起它变化的原因就越多，这将导致责任依赖，相互之间就产⽣影响，从⽽极⼤的损伤其内聚性和耦合度。单⼀责任，通常意味着单⼀的功能，因此不要为⼀个模块实 现过多的功能点，以保证实体只有⼀个引起它变化的原因。</p><p>先看 C# 中标准写法，这种写法也适用于 js</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">namespace SOLID</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public class Users</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 支付</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Pay(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 数据库操作</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void DataAccess(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 日志操作</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Logger(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//1.在这个用户类中有这三个功能：1.支付逻辑，2数据库逻辑，3.日志操作。</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//2.如果将这三个功能结合在一个类中，可能会出现修改部分代码时会破坏其他的部分。</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//3.多个功能也使这个用户类难以理解，降低了内聚性。所以最好就是将这个类分离为三个分离的类，每个类仅仅有一个功能。</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">namespace SOLID</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 数据库操作</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class DataAccess { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 日志</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class Logger { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 支付</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class Pay { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>在 js 中实现</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Bad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">UserSettings</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">user</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">user</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">changeSettings</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">settings</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">verifyCredentials</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">verifyCredentials</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Good:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">UserAuth</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">user</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">user</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">verifyCredentials</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">UserSetting</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">user</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">user</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">auth</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">UserAuth</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">user</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">changeSettings</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">settings</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">auth</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">verifyCredentials</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="开闭原则--o">开闭原则 | O<a aria-hidden="true" class="hash-link" href="#开闭原则--o" title="标题的直接链接">​</a></h3><p>开闭原则(ocp | Open Close Principle) 认为“软件体应该是对于扩展开放的，但是对于修改封闭的”的概念。软件实体应该是可扩展，⽽不可修改的。也就是说，<strong>对扩展是开放的，⽽对修改是封闭的（“开”指的就是类、模块、函数都应该具有可扩展性，“闭”指的是它们不应该被修改。也就是说你可以新增功能但不能去修改源码。）</strong>。这个原则是诸多⾯向对象编程原则中最抽象、最难理解的⼀个。</p><p>对扩展开放，意味着有新的需求或变化时，可以对现有代码进⾏扩展，以适应新的情况。对修改封闭，意味着类⼀旦设计完成，就可以独⽴完成其⼯作，⽽不要对类进⾏任何修改。可以使⽤变化和不变来说明：封装不变部分，开放变化部分，⼀般使⽤接⼝继承实现⽅式来实现“开放”应对变化，说⼤⽩话就是：你不是要变化吗？，那么我就让你继承实现⼀个对象，⽤⼀个接⼝来抽象你的职责，你变化越多，继承实现的⼦类就越多。</p><p>同样适用 C# 来作为展示</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">//abstract修饰的类，叫做抽象类，是不允许实例化的类，</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//不能直接创建对象，必须要通过子类创建才能使用abstract类的方法。</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">abstract class DataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public abstract void OpenConnection();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public abstract void CloseConnection();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public abstract void ExecuteCommand();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// SQL</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">class SqlDataAccess : DataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 打开SQL数据库</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void OpenConnection() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 关闭Sql数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void CloseConnection() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 执行Sql数据命令</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void ExecuteCommand() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// ORACLE</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">/// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">class OracleDataAccess : DataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 打开Oracle数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void OpenConnection() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 关闭Oracle数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void CloseConnection() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// 执行Oracle数据命令</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void ExecuteCommand() { }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>在 js 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">//Bad:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">AjaxAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Adapter</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;ajaxAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">NodeAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Adapter</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;nodeAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">HttpRequester</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">adapter</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">adapter</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">fetch</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">adapter</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">===</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;ajaxAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token function" style="color:#00E673">makeAjaxCall</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">then</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">response</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token comment" style="color:#737373">// 传递 response 并 return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#FF69B4">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">adapter</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">===</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;httpNodeAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token function" style="color:#00E673">makeHttpCall</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">then</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">response</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        </span><span class="token comment" style="color:#737373">// 传递 response 并 return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">function</span><span class="token plain"> </span><span class="token function" style="color:#00E673">makeAjaxCall</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// 处理 request 并 return promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">function</span><span class="token plain"> </span><span class="token function" style="color:#00E673">makeHttpCall</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// 处理 request 并 return promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Good:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">AjaxAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Adapter</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;ajaxAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">request</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// 处理 request 并 return promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">NodeAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Adapter</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">name</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;nodeAdapter&#x27;</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">request</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// 处理 request 并 return promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">HttpRequester</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">adapter</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">adapter</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">fetch</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">adapter</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">request</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">then</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">response</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token comment" style="color:#737373">// 传递 response 并 return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="替换原则--l">⾥⽒替换原则 | L<a aria-hidden="true" class="hash-link" href="#替换原则--l" title="标题的直接链接">​</a></h3><p>⾥⽒替换原则（Liskov Substitution Principle）：⾥⽒替换原则 认为“程序中的对象应该是可以在不改变程序正确性的前提下被它的⼦类所替换的”的概念。</p><p><strong>⼦类必须能够替换成它们的基类</strong>。即：⼦类应该可以替换任何基类能够出现的地⽅，并且经过替换以后，代码还能正常⼯作。另外，不应该 在代码中出现if/else之类对⼦类类型进⾏判断的条件。⾥⽒替换原则LSP是使代码符合开闭原则的⼀个重要保证。正是由于⼦类型的可替换性才使得⽗类 型的模块在⽆需修改的情况下就可以扩展。在很多情况下，在设计初期我们类之间的关系不是很明确，LSP则给了我们⼀个判断和设计类之间关系的基准：需不需 要继承，以及怎样设计继承关系。</p><p>当⼀个⼦类的实例应该能够替换任何其超类的实例时，它们之间才具有is-A关系。继承对于OCP，就相当于多态性对于⾥⽒替换原则。⼦类可以代替基类，客户使⽤基类，他们不需要知道派⽣类所做的事情。这是⼀个针对⾏为职责可替代的原则，如果S是T的⼦类型，那么S对象就应该在不改变任何抽象属性情况下替换所有T对象。</p><p>C# 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">class Rectangle</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    protected int width = 0;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    protected int height = 0;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public virtual void SetWidth(int width)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.width = width;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public virtual void SetHeight(int height)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.height = height;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public virtual int GetArea()</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        return this.width * this.height;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">class Square : Rectangle</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">{</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void SetHeight(int height)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.height = height;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.width = height;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public override void SetWidth(int width)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.height = width;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        this.width = width;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>在 js 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">//Bad:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 长方形</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">0</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">0</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setColor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">color</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">render</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">area</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setWidth</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">width</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> width</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setHeight</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">height</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">getArea</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">*</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 正方形</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Square</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setWidth</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">width</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> width</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> width</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setHeight</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">height</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">function</span><span class="token plain"> </span><span class="token function" style="color:#00E673">renderLargeRectangles</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">rectangles</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  rectangles</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">forEach</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">rectangle</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    rectangle</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setWidth</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token number" style="color:#BD93F9">4</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    rectangle</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setHeight</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token number" style="color:#BD93F9">5</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> area </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> rectangle</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getArea</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    rectangle</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">render</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">area</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> rectangles </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Square</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token function" style="color:#00E673">renderLargeRectangles</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">rectangles</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//===============================================================</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Good</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Shape</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setColor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">color</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">render</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">area</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Shape</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">width</span><span class="token parameter punctuation" style="color:#FF69B4">,</span><span class="token parameter" style="color:#FFB86C"> height</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> width</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">getArea</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">width</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">*</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">height</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Square</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Shape</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">length</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">super</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">length</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> length</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">getArea</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">return</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">length</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">*</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">length</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">function</span><span class="token plain"> </span><span class="token function" style="color:#00E673">renderLargeShapes</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">shapes</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  shapes</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">forEach</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">shape</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> area </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> shape</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getArea</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    shape</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">render</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">area</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> shapes </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token number" style="color:#BD93F9">4</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">5</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Rectangle</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token number" style="color:#BD93F9">4</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token number" style="color:#BD93F9">5</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">Square</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token number" style="color:#BD93F9">5</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token function" style="color:#00E673">renderLargeShapes</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">shapes</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="接隔离原则--i">接⼝隔离原则 | I<a aria-hidden="true" class="hash-link" href="#接隔离原则--i" title="标题的直接链接">​</a></h3><p>接⼝隔离原则 ：接⼝隔离原则 认为“多个特定客户端接⼝要好于⼀个宽泛⽤途的接⼝”的概念。不能强迫⽤户去依赖那些他们不使⽤的接⼝。<strong>换句话说，使⽤多个专⻔的接⼝⽐使⽤单⼀的总接⼝总要好(JavaScript ⼏乎没有接⼝的概念所以ts的重要性不言而喻)</strong>。注意：在代码中应⽤ISP并不⼀定意味着服务就是绝对安全的。仍然需要采⽤良好的编码实践，以确保正确的验证与授权。</p><p>这个原则起源于施乐公司，他们需要建⽴了⼀个新的打印机系统，可以执⾏诸如装订的印刷品⼀套，传真多种任务。此系统软件创建从底层开始编制，并实现了这些 任务功能，但是不断增⻓的软件功能却使软件本身越来越难适应变化和维护。每⼀次改变，即使是最⼩的变化，有⼈可能需要近⼀个⼩时的重新编译和重新部署。这 是⼏乎不可能再继续发展，所以他们聘请罗伯特Robert帮助他们。他们⾸先设计了⼀个主要类Job,⼏乎能够⽤于实现所有任务功能。只要调⽤Job类的 ⼀个⽅法就可以实现⼀个功能，Job类就变动⾮常⼤，是⼀个胖模型啊，对于客户端如果只需要⼀个打印功能，但是其他⽆关打印的⽅法功能也和其耦合，ISP 原则建议在客户端和Job类之间增加⼀个接⼝层，对于不同功能有不同接⼝，⽐如打印功能就是Print接⼝，然后将⼤的Job类切分为继承不同接⼝的⼦ 类，这样有⼀个Print Job类，等等。</p><p>C# 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">interface IDataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void OpenConnection();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void CloseConnection();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    interface ISqlDataAccess : IDataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void ExecuteSqlCommand();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    interface IOracleDataAccess : IDataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void ExecuteOracleCommand();</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class SqlDataAccess : ISqlDataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 执行Sql数据命令</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void ExecuteSqlCommand(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 打开Sql数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void OpenConnection(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 关闭Sql数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void CloseConnection(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class OracleDataAccess : IOracleDataAccess</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 执行Oracle数据命令</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void ExecuteOracleCommand(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 打开Oracle数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void OpenConnection(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// 关闭Oracle数据连接</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void CloseConnection(){}</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>在 js 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">//Bad:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">DOMTraverser</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">settings</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">settings</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setup</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setup</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">rootNode</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">settings</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">rootNode</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">animationModule</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setup</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">traverse</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> $ </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">DOMTraverser</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  rootNode</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#BD93F9">document</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getElementsByTagName</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;body&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">animationModule</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"> </span><span class="token comment" style="color:#737373">// Most of the time, we won&#x27;t need to animate when traversing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Good:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">DOMTraverser</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">settings</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">settings</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">options</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">options</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setup</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setup</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">rootNode</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">settings</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">rootNode</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">setupOptions</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">setupOptions</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#FF69B4">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">options</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">animationModule</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">traverse</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> $ </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">DOMTraverser</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  rootNode</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#BD93F9">document</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">getElementsByTagName</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token string" style="color:#C3E88D">&#x27;body&#x27;</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  options</span><span class="token operator" style="color:#FF69B4">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token function" style="color:#00E673">animationModule</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="依赖倒置反转原则--d">依赖倒置/反转原则 | D<a aria-hidden="true" class="hash-link" href="#依赖倒置反转原则--d" title="标题的直接链接">​</a></h3><p>依赖倒置原则(Dependency Inversion Principle，DIP)规定：代码应当取决于抽象概念，⽽不是具体实现。</p><p><strong>⾼层模块不应该依赖于低层模块，⼆者都应该依赖于抽象</strong>.</p><p><strong>抽象不应该依赖于细节，细节应该依赖于抽象 (总结解耦)</strong>.</p><p>类可能依赖于其他类来执⾏其⼯作。但是，它们不应当依赖于该类的特定具体实现，⽽应当是它的抽象。这个原则实在是太重要了，社会的分⼯化，标准化都 是这个设计原则的体现。显然，这⼀概念会⼤⼤提⾼系统的灵活性。如果类只关⼼它们⽤于⽀持特定契约⽽不是特定类型的组件，就可以快速⽽轻松地修改这些低级 服务的功能，同时最⼤限度地降低对系统其余部分的影响。</p><p>C# 实现</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">    interface IBankAccount</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        long BankNumber { get; set; } // 卡号</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        decimal Balance { get; set; } // 余额</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    // 转账人</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    interface ITransferSource : IBankAccount</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void CutPayment(decimal value);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    // 收款人</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    interface ITransferDestination : IBankAccount</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        void AddMoney(decimal value);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class BankAccout : IBankAccount, ITransferSource, ITransferDestination</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public long BankNumber { get; set; }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public decimal Balance { get; set; }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void CutPayment(decimal value)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            Balance -= value;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void AddMoney(decimal value)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            Balance += value;</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    class TransferAmount</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public decimal Amount { get; set; }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        public void Transfer(ITransferSource source, ITransferDestination dest)</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            source.CutPayment(Amount);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">            dest.AddMoney(Amount);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>js 实现</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token comment" style="color:#737373">//Bad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 库存查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryRequester</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">REQ_METHODS</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token string" style="color:#C3E88D">&#x27;HTTP&#x27;</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">requestItem</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 库存跟踪</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryTracker</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">items</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">items</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> items</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// 这里依赖一个特殊的请求类，其实我们只是需要一个请求方法。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">requester</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryRequester</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">requestItems</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">items</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">forEach</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">requester</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">requestItem</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> inventoryTracker </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryTracker</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token string" style="color:#C3E88D">&#x27;apples&#x27;</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;bananas&#x27;</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">inventoryTracker</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">requestItems</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">//Good:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 库存跟踪</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryTracker</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">items</span><span class="token parameter punctuation" style="color:#FF69B4">,</span><span class="token parameter" style="color:#FFB86C"> requester</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">items</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> items</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">requester</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> requester</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">requestItems</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">items</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">forEach</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#FF69B4">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">      </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token property-access" style="color:#8BE9FD">requester</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">requestItem</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// HTTP 请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryRequesterHTTP</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">REQ_METHODS</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token string" style="color:#C3E88D">&#x27;HTTP&#x27;</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">requestItem</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// webSocket 请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">class</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryRequesterWS</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">constructor</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token keyword" style="color:#FF69B4">this</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token constant" style="color:#BD93F9">REQ_METHODS</span><span class="token plain"> </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token string" style="color:#C3E88D">&#x27;WS&#x27;</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token function" style="color:#00E673">requestItem</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token parameter" style="color:#FFB86C">item</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#FF69B4">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    </span><span class="token comment" style="color:#737373">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">  </span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token punctuation" style="color:#FF69B4">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token comment" style="color:#737373">// 通过依赖注入的方式将请求模块解耦，这样我们就可以很轻易的替换成 webSocket 请求。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain"></span><span class="token keyword" style="color:#FF69B4">const</span><span class="token plain"> inventoryTracker </span><span class="token operator" style="color:#FF69B4">=</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryTracker</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">[</span><span class="token string" style="color:#C3E88D">&#x27;apples&#x27;</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token string" style="color:#C3E88D">&#x27;bananas&#x27;</span><span class="token punctuation" style="color:#FF69B4">]</span><span class="token punctuation" style="color:#FF69B4">,</span><span class="token plain"> </span><span class="token keyword" style="color:#FF69B4">new</span><span class="token plain"> </span><span class="token class-name" style="color:#00bfff">InventoryRequesterHTTP</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">inventoryTracker</span><span class="token punctuation" style="color:#FF69B4">.</span><span class="token method function property-access" style="color:#8BE9FD">requestItems</span><span class="token punctuation" style="color:#FF69B4">(</span><span class="token punctuation" style="color:#FF69B4">)</span><span class="token punctuation" style="color:#FF69B4">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="依赖注di">依赖注⼊DI<a aria-hidden="true" class="hash-link" href="#依赖注di" title="标题的直接链接">​</a></h2><p>依赖注⼊（Dependency Injection）为⼀个⽅法应该遵从“依赖于抽象⽽不是⼀个实例” 的概念。依赖注⼊是该原则的⼀种实现⽅式。</p><ul><li><p><strong>依赖注⼊</strong>: 当某个⻆⾊要另⼀个⻆⾊协助时，通常由调⽤者来创建被调⽤者的实例。现在创建实例由容器来完成然后注⼊调⽤者。</p></li><li><p><strong>注⼊过程</strong>: 如果需要调⽤另⼀个对象协助时，⽆须在代码中创建被调⽤者，⽽是 <strong>依赖</strong> 于外部的 <strong>注⼊</strong></p></li><li><p><strong>两种⽅式</strong>: 设值注⼊、构造注⼊</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="控制反转ioc">控制反转IOC<a aria-hidden="true" class="hash-link" href="#控制反转ioc" title="标题的直接链接">​</a></h2><p>控制反转（Inversion of Control），IoC可以认为是⼀种全新的设计模式，但是理论和时间成熟相对较晚。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="什么是控制反转">什么是控制反转<a aria-hidden="true" class="hash-link" href="#什么是控制反转" title="标题的直接链接">​</a></h3><p>控制反转（Inversion of Control，缩写为IoC），是⾯向对象编程中的⼀种设计原则，可以⽤来减低计算机代码之间的耦合度。其中最常⻅的⽅式叫做依赖注⼊（Dependency Injection，简称DI），还有⼀种⽅式叫“依赖查找”（Dependency Lookup）。通过控制反转，对象在被创建的时候，由⼀个调控系统内所有对象的外界实体，将其所依赖的对象的引⽤传递给它。也可以说，依赖被注⼊到对象中。</p><table><thead><tr><th align="center"><img alt="no_use_ioc" src="/assets/images/no_use_ioc-d93ad7cd107f528e3a7f0064a00fe4e3.png"></th><th align="center"><img alt="use_ioc" src="/assets/images/use_ioc-d57ab60af1f40a5d21e5fc57e060171b.png"></th></tr></thead></table><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="控制反转方式">控制反转方式<a aria-hidden="true" class="hash-link" href="#控制反转方式" title="标题的直接链接">​</a></h3><p><strong>依赖查找</strong>：容器提供回调接口和上下文条件给组件</p><p><strong>依赖注入</strong>：组件不做定位查询，只 提供普通的方法让容器去决定依赖关系。</p><p>C# 中</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#dddddd;background-color:#24272a"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#dddddd"><span class="token plain">//IoC容器，它就是一个创建工厂，你要什么对象，它就给你什么对象，有了IoC容器，依赖关系就变了，</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//原先的依赖关系就没了，它们都依赖IoC容器了，通过IoC容器来建立它们之间的关系。</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">//通过反射来创建，把具体的文件名写在配置文件里，这时候客户端代码也不用变了，只需要改配置文件就好了，稳定性又有了提高，如下：</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">public class MediaFile {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    public void PlayMedia() {</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        IMediaFile _mtype = Assembly.Load(ConfigurationManager.AppSettings[&quot;AssemName&quot;]).CreateInstance(ConfigurationManager.AppSettings[&quot;MediaName&quot;]);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        IPlayer _player = Assembly.Load(ConfigurationManager.AppSettings[&quot;AssemName&quot;]).CreateInstance(ConfigurationManager.AppSettings[&quot;PlayerName&quot;]);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">        _player.Play(_mtype);</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#dddddd"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="向切编程aop">⾯向切⾯编程AOP<a aria-hidden="true" class="hash-link" href="#向切编程aop" title="标题的直接链接">​</a></h2><p>在软件业，AOP为Aspect Oriented Programming的缩写，意为：⾯向切⾯编程，通过预编译⽅式和运⾏期动态代理实现程序功能的统⼀维护的⼀种技术。AOP是OOP的延续，是软件开发中的⼀个热点，也是Spring框架中的⼀个重要内容，是函数式编程的⼀种衍⽣范型。利⽤AOP可以对业务逻辑的各个部分进⾏隔离，从⽽使得业务逻辑各部分之间的耦合度降低，提⾼程序的可重⽤性，同时提⾼了开发的效率</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="基本概念">基本概念<a aria-hidden="true" class="hash-link" href="#基本概念" title="标题的直接链接">​</a></h3><p>AOP完善spring的依赖注⼊（DI）⾯向对象编程将程序分解成各个层次的对象，⾯向切⾯编程将程序运⾏过程分解成各个切⾯。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="filter">Filter<a aria-hidden="true" class="hash-link" href="#filter" title="标题的直接链接">​</a></h3><p>Filter（过滤器）也是⼀种AOPA它利⽤⼀种称为&quot;横切&quot;的技术，剖解开封装的对象内部，并将那些影响了多个类的公共⾏为封装到⼀个可重⽤模块，并将其命名为&quot;Aspect&quot;，即切⾯。所谓&quot;切⾯&quot;</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="优点">优点<a aria-hidden="true" class="hash-link" href="#优点" title="标题的直接链接">​</a></h3><p>AOP的好处就是你只需要⼲你的正事，其它事情别⼈帮你⼲。在你访问数据库之前，⾃动帮你开启事务，当你访问数据库结束之后，⾃动帮你提交/回滚事务！</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/HondryTravis/Blog/tree/master/packages/docs/thinking/aop.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">最后<!-- -->由 <b>travis</b> <!-- -->于 <b><time datetime="2022-12-06T11:14:09.000Z">2022/12/6</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/linux/linux_centos"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« <!-- -->CentOS 7</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/thinking/functional_programming"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">函数式编程<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#编程思想逐步提升" class="table-of-contents__link toc-highlight">编程思想逐步提升</a></li><li><a href="#solid设计原则" class="table-of-contents__link toc-highlight">SOLID设计原则</a><ul><li><a href="#单功能原则--s" class="table-of-contents__link toc-highlight">单⼀功能原则 | S</a></li><li><a href="#开闭原则--o" class="table-of-contents__link toc-highlight">开闭原则 | O</a></li><li><a href="#替换原则--l" class="table-of-contents__link toc-highlight">⾥⽒替换原则 | L</a></li><li><a href="#接隔离原则--i" class="table-of-contents__link toc-highlight">接⼝隔离原则 | I</a></li><li><a href="#依赖倒置反转原则--d" class="table-of-contents__link toc-highlight">依赖倒置/反转原则 | D</a></li></ul></li><li><a href="#依赖注di" class="table-of-contents__link toc-highlight">依赖注⼊DI</a></li><li><a href="#控制反转ioc" class="table-of-contents__link toc-highlight">控制反转IOC</a><ul><li><a href="#什么是控制反转" class="table-of-contents__link toc-highlight">什么是控制反转</a></li><li><a href="#控制反转方式" class="table-of-contents__link toc-highlight">控制反转方式</a></li></ul></li><li><a href="#向切编程aop" class="table-of-contents__link toc-highlight">⾯向切⾯编程AOP</a><ul><li><a href="#基本概念" class="table-of-contents__link toc-highlight">基本概念</a></li><li><a href="#filter" class="table-of-contents__link toc-highlight">Filter</a></li><li><a href="#优点" class="table-of-contents__link toc-highlight">优点</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">快速了解</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/performance/page_performance_index">如何监控页面性能指标</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/thinking/design_patterns">设计模式</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/thinking/functional_programming">函数式编程</a></li></ul></div><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/algorithm/">算法</a></li></ul></div><div class="col footer__col"><div class="footer__title">开源贡献</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/open_source/cli/tscli">tscli</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/github/indexeddb">Indexeddb</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/github/tinydb_docapi">TinyDB</a></li><li class="footer__item"><a class="footer__link-item" href="/open_source/vscode/Simple-dark">Simple dark</a></li><li class="footer__item"><a href="https://github.com/HondryTravis/xs-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>xs-doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/myliang/x-spreadsheet" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>x-spreadsheet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">联系方式</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contact">邮箱 | 联系方式</a></li></ul></div><div class="col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items"><li class="footer__item"><a href="https://kalacloud.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>卡拉云低代码工具<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">AGPL-3.0 Licensed | Copyright © 2020-present HondryTravis, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.261a0b30.js"></script>
<script src="/assets/js/main.d8aec2c2.js"></script>
</body>
</html>