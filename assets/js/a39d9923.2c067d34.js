"use strict";(self.webpackChunkhondrytravis_blog=self.webpackChunkhondrytravis_blog||[]).push([[4528],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return k}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=c(n),k=r,g=s["".concat(p,".").concat(k)]||s[k]||m[k]||o;return n?a.createElement(g,i(i({ref:t},d),{},{components:n})):a.createElement(g,i({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=s;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},5889:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return d},default:function(){return s}});var a=n(3117),r=n(102),o=(n(7294),n(3905)),i=["components"],l={title:"\u9875\u9762\u6027\u80fd\u6307\u6807"},p=void 0,c={unversionedId:"performance/page_performance_index",id:"performance/page_performance_index",isDocsHomePage:!1,title:"\u9875\u9762\u6027\u80fd\u6307\u6807",description:"\u5982\u4f55\u7cbe\u51c6\u5b9a\u4f4d\u9875\u9762\u90a3\u4e00\u5757\u6e32\u67d3\u95ee\u9898\uff1f",source:"@site/packages/docs/performance/page_performance_index.md",sourceDirName:"performance",slug:"/performance/page_performance_index",permalink:"/docs/performance/page_performance_index",editUrl:"https://github.com/HondryTravis/Blog/tree/master/packages/docs/performance/page_performance_index.md",tags:[],version:"current",lastUpdatedBy:"travis",lastUpdatedAt:1670325249,formattedLastUpdatedAt:"2022/12/6",frontMatter:{title:"\u9875\u9762\u6027\u80fd\u6307\u6807"},sidebar:"docs",previous:{title:"\u8ba4\u8bc6\u6e32\u67d3\u8fc7\u7a0b",permalink:"/docs/performance/rendering_process"},next:{title:"Vue2 | \u6e90\u7801\u89e3\u6790",permalink:"/docs/framework/vue/vue_1"}},d=[{value:"\u6307\u6807",id:"\u6307\u6807",children:[{value:"FP\u3001FCP\u3001FMP\u3001TTI",id:"fpfcpfmptti",children:[],level:3},{value:"LongTask",id:"longtask",children:[],level:3}],level:2},{value:"\u65b0\u589e\u6307\u6807",id:"\u65b0\u589e\u6307\u6807",children:[{value:"LCP\u3001FID\u3001TBT\u3001CLS",id:"lcpfidtbtcls",children:[],level:3}],level:2},{value:"\u5982\u4f55\u83b7\u53d6\u6307\u6807",id:"\u5982\u4f55\u83b7\u53d6\u6307\u6807",children:[{value:"PerformanceObserver",id:"performanceobserver",children:[],level:3},{value:"entryType",id:"entrytype",children:[],level:3},{value:"\u83b7\u53d6\u66f4\u591a\u6307\u6807\u4fe1\u606f",id:"\u83b7\u53d6\u66f4\u591a\u6307\u6807\u4fe1\u606f",children:[],level:3},{value:"Google \u5b98\u65b9\u63d0\u4f9b\u7684\u4f18\u5316\u5b66\u4e60\u65b9\u6848",id:"google-\u5b98\u65b9\u63d0\u4f9b\u7684\u4f18\u5316\u5b66\u4e60\u65b9\u6848",children:[],level:3},{value:"\u901a\u8fc7\u7b2c\u4e09\u65b9\u5e93\u83b7\u53d6",id:"\u901a\u8fc7\u7b2c\u4e09\u65b9\u5e93\u83b7\u53d6",children:[],level:3}],level:2},{value:"\u601d\u8003",id:"\u601d\u8003",children:[],level:2}],m={toc:d};function s(e){var t=e.components,l=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u601d\u8003 \ud83e\udd14")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"\u5982\u4f55\u7cbe\u51c6\u5b9a\u4f4d\u9875\u9762\u90a3\u4e00\u5757\u6e32\u67d3\u95ee\u9898\uff1f"))),(0,o.kt)("h2",{id:"\u6307\u6807"},"\u6307\u6807"),(0,o.kt)("p",null,"\u4e3a\u9875\u9762\u6e32\u67d3\u5404\u4e2a\u9636\u6bb5\u7684\u6807\u8bc6\u7b26\uff0c\u53ef\u4ee5\u901a\u8fc7\u8ba1\u7b97\u5f97\u5230"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"center"},"\u9636\u6bb5(\u7b80\u5199)"),(0,o.kt)("th",{parentName:"tr",align:"center"},"\u63cf\u8ff0"),(0,o.kt)("th",{parentName:"tr",align:"center"},"\u9636\u6bb5(\u5168\u79f0)"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"TTFP"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u9996\u5b57\u8282\u65f6\u95f4"),(0,o.kt)("td",{parentName:"tr",align:"center"},"Time TO Frist Byte")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"FP"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u9996\u6b21\u7ed8\u5236(\u7b2c\u4e00\u4e2a\u8282\u70b9)"),(0,o.kt)("td",{parentName:"tr",align:"center"},"First Paint")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"FCP"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u9996\u6b21\u6709\u5185\u5bb9\u7684\u7ed8\u5236(\u9aa8\u67b6)"),(0,o.kt)("td",{parentName:"tr",align:"center"},"First Contentful Paint")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"FMP"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u9996\u6b21\u6709\u610f\u4e49\u7684\u7ed8\u5236(\u5305\u542b\u6240\u6709\u5143\u7d20/\u6570\u636e)"),(0,o.kt)("td",{parentName:"tr",align:"center"},"First Meaningful")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"TTI"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u8fbe\u5230\u53ef\u4ea4\u4e92\u65f6\u95f4\uff0c\u63a8\u8350\u7684\u54cd\u5e94\u65f6\u95f4\u662f100ms\u4ee5\u5185\u5426\u5219\u6709\u5ef6\u8fdf"),(0,o.kt)("td",{parentName:"tr",align:"center"},"Time To Interactive")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"Long tasks"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u8d85\u8fc7\u4e86 50ms \u7684\u4efb\u52a1"),(0,o.kt)("td",{parentName:"tr",align:"center"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"SSR&&CSR"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u670d\u52a1\u7aef\u6e32\u67d3\u548c\u5ba2\u6237\u7aef\u6e32\u67d3"),(0,o.kt)("td",{parentName:"tr",align:"center"},"Server-Side-Rendering / Client Side Rendering")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"Isomorphic"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u540c\u6784\u5316"),(0,o.kt)("td",{parentName:"tr",align:"center"})))),(0,o.kt)("h3",{id:"fpfcpfmptti"},"FP\u3001FCP\u3001FMP\u3001TTI"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"base_all_info",src:n(5122).Z})),(0,o.kt)("h3",{id:"longtask"},"LongTask"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"long_tasks",src:n(4912).Z})),(0,o.kt)("h2",{id:"\u65b0\u589e\u6307\u6807"},"\u65b0\u589e\u6307\u6807"),(0,o.kt)("h3",{id:"lcpfidtbtcls"},"LCP\u3001FID\u3001TBT\u3001CLS"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"center"},"\u9636\u6bb5(\u7b80\u5199)"),(0,o.kt)("th",{parentName:"tr",align:"center"},"\u63cf\u8ff0"),(0,o.kt)("th",{parentName:"tr",align:"center"},"\u9636\u6bb5(\u5168\u79f0)"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"LCP"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u6700\u2f24\u5185\u5bb9\u7ed8\u5236\uff0c\u2f64\u4e8e\u8bb0\u5f55\u89c6\u7a97\u5185\u6700\u2f24\u7684\u5143\u7d20\u7ed8\u5236\u7684\u65f6\u95f4\uff0c\u8be5\u65f6\u95f4\u4f1a\u968f\u7740\u2eda\u2faf\u6e32\u67d3\u53d8\u5316\u2f7d\u53d8\u5316\uff0c\u56e0\u4e3a\u2eda\u2faf\u4e2d\u7684\u6700\u2f24\u5143\u7d20\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u53d1\u2f63\u6539\u53d8\uff0c\u53e6\u5916\u8be5\u6307\u6807\u4f1a\u5728\u2f64\u6237\u7b2c\u2f00\u6b21\u4ea4\u4e92\u540e\u505c\u2f4c\u8bb0\u5f55"),(0,o.kt)("td",{parentName:"tr",align:"center"},"LCP\uff08Largest Contentful Paint\uff09")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"FID"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u2fb8\u6b21\u8f93\u2f0a\u5ef6\u8fdf\uff0c\u8bb0\u5f55\u5728 FCP \u548c TTI \u4e4b\u95f4\u2f64\u6237\u2fb8\u6b21\u4e0e\u2eda\u2faf\u4ea4\u4e92\u65f6\u54cd\u5e94\u7684\u5ef6\u8fdf"),(0,o.kt)("td",{parentName:"tr",align:"center"},"FID\uff08First Input Delay\uff09")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"TBT"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u963b\u585e\u603b\u65f6\u95f4\uff0c\u8bb0\u5f55\u5728 FCP \u5230 TTI \u4e4b\u95f4\u6240\u6709\u2ed3\u4efb\u52a1\u7684\u963b\u585e\u65f6\u95f4\u603b\u548c"),(0,o.kt)("td",{parentName:"tr",align:"center"},"TBT\uff08Total Blocking Time\uff09")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"CLS"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u7d2f\u8ba1\u4f4d\u79fb\u504f\u79fb\uff0c\u8bb0\u5f55\u4e86\u2eda\u2faf\u4e0a\u2fae\u9884\u671f\u7684\u4f4d\u79fb\u6ce2\u52a8\u3002\u4f7f\u2f64\u6309\u94ae\u52a8\u6001\u6dfb\u52a0\u4e86\u67d0\u4e2a\u5143\u7d20\uff0c\u5bfc\u81f4\u2eda\u2faf\u4e0a\u5176\u4ed6\u4f4d\u7f6e\u7684\u4ee3\u7801\u53d1\u2f63\u4e86\u504f\u79fb\uff0c\u9020\u6210\u4e86\u2eda\u2faf"),(0,o.kt)("td",{parentName:"tr",align:"center"},"CLS\uff08Cumulative Layout Shift\uff09")))),(0,o.kt)("p",null,"\u7b80\u5355\u7684\u6307\u6807\u6807\u51c6"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"fcp_time",src:n(270).Z}),"\n",(0,o.kt)("img",{alt:"lcp_time",src:n(5546).Z}),"\n",(0,o.kt)("img",{alt:"fid_time",src:n(9643).Z}),"\n",(0,o.kt)("img",{alt:"cls_time",src:n(437).Z})),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u603b\u7ed3")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"LCP"),": \u4ee3\u8868\u4e86\u2eda\u2faf\u7684\u901f\u5ea6\u6307\u6807\uff0c LCP \u80fd\u4f53\u73b0\u7684\u4e1c\u2ec4\u66f4\u591a\u2f00\u4e9b\u3002\u2f00\u662f\u6307\u6807\n\u5b9e\u65f6\u66f4\u65b0\uff0c\u6570\u636e\u66f4\u7cbe\u786e\uff0c\u2f06\u662f\u4ee3\u8868\u7740\u2eda\u2faf\u6700\u2f24\u5143\u7d20\u7684\u6e32\u67d3\u65f6\u95f4\uff0c\u6700\u2f24\u5143\n\u7d20\u7684\u5feb\u901f\u8f7d\u2f0a\u80fd\u8ba9\u2f64\u6237\u611f\u89c9\u6027\u80fd\u8fd8\u633a\u597d\u3002"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"FID"),": \u4ee3\u8868\u2eda\u2faf\u7684\u4ea4\u4e92\u4f53\u9a8c\u6307\u6807\uff0c\u4ea4\u4e92\u54cd\u5e94\u7684\u5feb\u4f1a\u8ba9\u2f64\u6237\u89c9\u5f97\u2f79\u2eda\u6d41\u7545\u3002"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"CLS"),": \u4ee3\u8868\u4e86\u2eda\u2faf\u7684\u7a33\u5b9a\u6307\u6807\uff0c\u5c24\u5176\u5728\u2f3f\u673a\u4e0a\u8fd9\u4e2a\u6307\u6807\u66f4\u4e3a\u91cd\u8981\u3002\u56e0\u4e3a\u2f3f\n\u673a\u5c4f\u5e55\u633a\u2f29\uff0cCLS \u503c\u2f00\u2f24\u7684\u8bdd\u4f1a\u8ba9\u2f64\u6237\u89c9\u5f97\u2eda\u2faf\u4f53\u9a8c\u505a\u7684\u5f88\u5dee\u3002"))),(0,o.kt)("h2",{id:"\u5982\u4f55\u83b7\u53d6\u6307\u6807"},"\u5982\u4f55\u83b7\u53d6\u6307\u6807"),(0,o.kt)("p",null,"\u901a\u8fc7\u6d4f\u89c8\u5668\u81ea\u5e26 Api \u6027\u80fd\u76d1\u6d4b\u5bf9\u8c61 ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceObserver/PerformanceObserver"},"MDN PerformanceObserver")," \u8bbf\u95ee\u3002"),(0,o.kt)("h3",{id:"performanceobserver"},"PerformanceObserver"),(0,o.kt)("p",null,"\u6027\u80fd\u76d1\u6d4b\u5bf9\u8c61"),(0,o.kt)("p",null,"\u6d4b\u8bd5\u4ee3\u7801 \ud83c\udf7a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Document</title>\n    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/5.0.0-alpha1/css/bootstrap-reboot.min.css"/>\n  </head>\n  <body>\n    <div id="app">\n      <h1>target dom</h1>\n      <script>\n        performance.mark(\'target\');\n      <\/script>\n    </div>\n    <script>\n      const observer = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n          console.log(entry.name);\n          console.log(entry.startTime);\n          console.log(entry.duration);\n          console.log(entry.entryType);\n        }\n      });\n      observer.observe({ entryTypes: [\'paint\', \'mark\', \'longtask\'] });\n    <\/script>\n  </body>\n</html>\n')),(0,o.kt)("h3",{id:"entrytype"},"entryType"),(0,o.kt)("p",null,"\u66f4\u4e3a\u8be6\u7ec6\u7684\u63cf\u8ff0\u8bf7\u53c2\u8003 ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceEntry/entryType"},"entryType")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"center"},"\u5c5e\u6027"),(0,o.kt)("th",{parentName:"tr",align:"center"},"\u63cf\u8ff0"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"frame, navigation"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u6587\u4ef6\u7684\u5730\u5740\u3002")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"resource"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u6240\u8bf7\u6c42\u8d44\u6e90\u7684\u89e3\u6790URL\u3002\u5373\u4f7f\u91cd\u5b9a\u5411\u8bf7\u6c42\uff0c\u6b64\u503c\u4e5f\u4e0d\u4f1a\u66f4\u6539\u3002")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"mark"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u901a\u8fc7\u8c03\u7528\u521b\u5efa\u6807\u8bb0\u65f6\u4f7f\u7528\u7684\u540d\u79f0 ",(0,o.kt)("inlineCode",{parentName:"td"},"performance.mark()"),"\u3002")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"measure"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u901a\u8fc7\u8c03\u7528\u521b\u5efa\u5ea6\u91cf\u65f6\u4f7f\u7528\u7684\u540d\u79f0 ",(0,o.kt)("inlineCode",{parentName:"td"},"performance.measure()"),"\u3002")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"paint"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u53ef\u80fd\u662f ",(0,o.kt)("inlineCode",{parentName:"td"},"first-paint")," \u6216 ",(0,o.kt)("inlineCode",{parentName:"td"},"first-contentful-paint"),"\u3002")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"longtask"),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u5728\u6d4f\u89c8\u5668\u6267\u884c\u8d85\u8fc7 50ms \u7684\u4efb\u52a1")))),(0,o.kt)("h3",{id:"\u83b7\u53d6\u66f4\u591a\u6307\u6807\u4fe1\u606f"},"\u83b7\u53d6\u66f4\u591a\u6307\u6807\u4fe1\u606f"),(0,o.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7 ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming"},"PerformanceTiming")," \u53ef\u4ee5\u83b7\u53d6\u6d4f\u89c8\u5668\u7684\u6307\u6807\u4fe1\u606f\uff0c\u5173\u4e8e dns \u89e3\u6790\u65f6\u95f4\uff0ctcp \u8017\u65f6\uff0crequest\u8bf7\u6c42\u8017\u65f6\uff0c\u89e3\u6790dom\u6811\u8017\u65f6\uff0c\u767d\u5c4f\u65f6\u95f4\uff0cdomready\u65f6\u95f4\uff0conload\u65f6\u95f4\uff0cjs\u5185\u5b58\u4f7f\u7528\u5360\u6bd4\u7b49\u3002"),(0,o.kt)("p",null,"\u6d4b\u8bd5\u6848\u4f8b \ud83c\udf7a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let t = performance.timing;\nconsole.log(\n  'DNS\u67e5\u8be2\u8017\u65f6 \uff1a' + (t.domainLookupEnd - t.domainLookupStart).toFixed(0)\n);\nconsole.log('TCP\u94fe\u63a5\u8017\u65f6 \uff1a' + (t.connectEnd - t.connectStart).toFixed(0));\nconsole.log(\n  'request\u8bf7\u6c42\u8017\u65f6 \uff1a' + (t.responseEnd - t.responseStart).toFixed(0)\n);\nconsole.log(\n  '\u89e3\u6790dom\u6811\u8017\u65f6 \uff1a' + (t.domComplete - t.domInteractive).toFixed(0)\n);\nconsole.log('\u767d\u5c4f\u65f6\u95f4 \uff1a' + (t.responseStart - t.navigationStart).toFixed(0));\nconsole.log(\n  'domready\u65f6\u95f4 \uff1a' +\n    (t.domContentLoadedEventEnd - t.navigationStart).toFixed(0)\n);\nconsole.log(\n  'onload\u65f6\u95f4 \uff1a' + (t.loadEventEnd - t.navigationStart).toFixed(0)\n);\n\nif ((t = performance.memory)) {\n  console.log(\n    'js\u5185\u5b58\u4f7f\u7528\u5360\u6bd4 \uff1a' +\n      ((t.usedJSHeapSize / t.totalJSHeapSize) * 100).toFixed(2) +\n      '%'\n  );\n}\n")),(0,o.kt)("h3",{id:"google-\u5b98\u65b9\u63d0\u4f9b\u7684\u4f18\u5316\u5b66\u4e60\u65b9\u6848"},"Google \u5b98\u65b9\u63d0\u4f9b\u7684\u4f18\u5316\u5b66\u4e60\u65b9\u6848"),(0,o.kt)("p",null,"google \u5b98\u65b9\u63d0\u4f9b ",(0,o.kt)("a",{parentName:"p",href:"https://web.dev/learn/"},"web.dev")),(0,o.kt)("h3",{id:"\u901a\u8fc7\u7b2c\u4e09\u65b9\u5e93\u83b7\u53d6"},"\u901a\u8fc7\u7b2c\u4e09\u65b9\u5e93\u83b7\u53d6"),(0,o.kt)("p",null,"NPM: ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/web-vitals"},"web-vitals"),";"),(0,o.kt)("p",null,"\u53ef\u4ee5\u83b7\u53d6\u7684\u6307\u6807\u6709\uff1aCLS\u3001FID\u3001LCP\u3001\u4ee5\u53ca FCP\u3001TTFB"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import {getCLS, getFID, getLCP} from 'web-vitals';\n\ngetCLS(console.log);\ngetFID(console.log);\ngetLCP(console.log);\n")),(0,o.kt)("h2",{id:"\u601d\u8003"},"\u601d\u8003"),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u601d\u8003 \ud83e\udd14")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"\u5982\u4f55\u505a\u4e00\u4e2a\u5c0f\u578b\u7684\u76d1\u63a7\u7cfb\u7edf?"))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u4e0a\u8ff0\u7684\u65b9\u6cd5\u62ff\u5230\u81ea\u5df1\u60f3\u8981\u7684\u6307\u6807"),(0,o.kt)("li",{parentName:"ol"},"\u53bb\u670d\u52a1\u5668\u4e0a\u8bf7\u6c42 \u4e00\u4e2a 1KB \u5927\u5c0f\u7684\u56fe\u7247 \u5e76\u5e26\u4e0a\u8fd9\u4e9b\u6307\u6807\u53c2\u6570"),(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528 navigator.sendBeacon() \u53d1\u9001\uff0c \u53c2\u8003 ",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/sendBeacon"},"sendBeacon")),(0,o.kt)("li",{parentName:"ol"},"Node \u8bfb\u53d6\u670d\u52a1\u5668\u65e5\u5fd7 \u8fc7\u6ee4\u6709\u6548\u7684\u63a5\u53e3"),(0,o.kt)("li",{parentName:"ol"},"\u5bf9\u63a5\u53e3\u53c2\u6570\u6574\u7406\u5e76\u8fdb\u884c\u5206\u6790"),(0,o.kt)("li",{parentName:"ol"},"\u5f00\u542f\u5b9a\u65f6\u4efb\u52a1\u6bcf\u5929\u51cc\u666812.00 \u5f00\u59cb\u8bfb\u53d6\u6570\u636e\u5e76\u7ed8\u5236\u51fa\u56fe\u8868")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u4e3a\u4ec0\u4e48\u4f7f\u7528 navigator.sendBeacon() \u8fdb\u884c\u53d1\u9001?")),(0,o.kt)("p",null,"navigator.sendBeacon() \u65b9\u6cd5\u53ef\u7528\u4e8e\u901a\u8fc7 HTTP \u5c06\u5c11\u91cf\u6570\u636e\u5f02\u6b65\u4f20\u8f93\u5230 Web \u670d\u52a1\u5668 \u800c\u4e0d\u5360\u7528\u8fdb\u7a0b"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u53d1\u9001\u53ef\u4ee5\u4f7f\u7528\u7684\u4f18\u5148\u7ea7"),":"),(0,o.kt)("p",null,"navigator.sendBeacon() > ajax > fetch"))}s.isMDXComponent=!0},5122:function(e,t,n){t.Z=n.p+"assets/images/base_all_info-8aa9a10171eb8ca0b84401624fe69c7d.png"},437:function(e,t,n){t.Z=n.p+"assets/images/cls_time-6db42604040c34fb71e40189697a14a9.png"},270:function(e,t,n){t.Z=n.p+"assets/images/fcp_time-7c85e78cf0bc8118432bb96c80edd5ad.png"},9643:function(e,t,n){t.Z=n.p+"assets/images/fid_time-079339eaa6d2728c7713cb149863083b.png"},5546:function(e,t,n){t.Z=n.p+"assets/images/lcp_time-0100f1216e3a901f9525f80656c32012.png"},4912:function(e,t,n){t.Z=n.p+"assets/images/long_tasks-959bfe0fbd3c184d305968fbb98f6919.png"}}]);