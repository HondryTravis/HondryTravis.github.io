"use strict";(self.webpackChunkhondrytravis_blog=self.webpackChunkhondrytravis_blog||[]).push([[8147],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return b}});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function m(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=a.createContext({}),o=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=o(e.components);return a.createElement(i.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,p=m(e,["components","mdxType","originalType","parentName"]),u=o(t),b=l,d=u["".concat(i,".").concat(b)]||u[b]||c[b]||r;return t?a.createElement(d,s(s({ref:n},p),{},{components:t})):a.createElement(d,s({ref:n},p))}));function b(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,s=new Array(r);s[0]=u;var m={};for(var i in n)hasOwnProperty.call(n,i)&&(m[i]=n[i]);m.originalType=e,m.mdxType="string"==typeof e?e:l,s[1]=m;for(var o=2;o<r;o++)s[o]=t[o];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4483:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return m},contentTitle:function(){return i},metadata:function(){return o},toc:function(){return p},default:function(){return u}});var a=t(3117),l=t(102),r=(t(7294),t(3905)),s=["components"],m={title:"wasm \u521d\u63a2"},i=void 0,o={unversionedId:"wasm/wasm",id:"wasm/wasm",isDocsHomePage:!1,title:"wasm \u521d\u63a2",description:"\u672c\u8d28\u5c31\u662f\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u7f16\u8bd1\u597d\u7684\u5b57\u8282\u7801(\u975e\u5e38\u63a5\u8fd1\u673a\u5668\u7801\u53ef\u4ee5\u5feb\u901f\u8f6c\u6362)",source:"@site/packages/docs/wasm/wasm.md",sourceDirName:"wasm",slug:"/wasm/wasm",permalink:"/docs/wasm/wasm",editUrl:"https://github.com/HondryTravis/Blog/tree/master/packages/docs/wasm/wasm.md",tags:[],version:"current",lastUpdatedBy:"travis",lastUpdatedAt:1670325249,formattedLastUpdatedAt:"2022/12/6",frontMatter:{title:"wasm \u521d\u63a2"},sidebar:"docs",previous:{title:"JS | \u88c5\u7bb1\u548c\u62c6\u7bb1",permalink:"/docs/typescript/js_packing_unboxing"},next:{title:"CSS \u963b\u585e I/O \u521d\u63a2",permalink:"/docs/css/css_io"}},p=[{value:"\u7279\u70b9",id:"\u7279\u70b9",children:[],level:2},{value:"\u7f16\u8bd1 wasm \u7684\u5de5\u5177",id:"\u7f16\u8bd1-wasm-\u7684\u5de5\u5177",children:[],level:2},{value:"\u6027\u80fd\u5bf9\u6bd4",id:"\u6027\u80fd\u5bf9\u6bd4",children:[],level:2},{value:"JavaScript API",id:"javascript-api",children:[{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5",children:[],level:3},{value:"\u7c7b",id:"\u7c7b",children:[],level:3},{value:"\u5177\u4f53\u6d41\u7a0b",id:"\u5177\u4f53\u6d41\u7a0b",children:[],level:3}],level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",children:[{value:"\u6267\u884c\u6d41\u7a0b",id:"\u6267\u884c\u6d41\u7a0b",children:[],level:3}],level:2},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",children:[{value:"Emscripten",id:"emscripten",children:[],level:3},{value:"\u7f16\u8bd1\u65b9\u5f0f",id:"\u7f16\u8bd1\u65b9\u5f0f",children:[],level:3}],level:2},{value:"Q &amp; A",id:"q--a",children:[],level:2}],c={toc:p};function u(e){var n=e.components,m=(0,l.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},c,m,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u672c\u8d28\u5c31\u662f\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u7f16\u8bd1\u597d\u7684\u5b57\u8282\u7801(\u975e\u5e38\u63a5\u8fd1\u673a\u5668\u7801\u53ef\u4ee5\u5feb\u901f\u8f6c\u6362)"),(0,r.kt)("h2",{id:"\u7279\u70b9"},"\u7279\u70b9"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9ad8\u6548",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"WebAssembly \u6709\u4e00\u5957\u5b8c\u6574\u7684\u8bed\u4e49\uff0c\u5b9e\u9645\u4e0a wasm \u662f\u4f53\u79ef\u5c0f\u4e14\u52a0\u8f7d\u5feb\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c \u5176\u76ee\u6807\u5c31\u662f\u5145\u5206\u53d1\u6325\u786c\u4ef6\u80fd\u529b\u4ee5\u8fbe\u5230\u539f\u751f\u6267\u884c\u6548\u7387"))),(0,r.kt)("li",{parentName:"ul"},"\u5b89\u5168",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"WebAssembly \u8fd0\u884c\u5728\u4e00\u4e2a\u6c99\u7bb1\u5316\u7684\u6267\u884c\u73af\u5883\u4e2d\uff0c\u751a\u81f3\u53ef\u4ee5\u5728\u73b0\u6709\u7684 JavaScript \u865a\u62df\u673a\u4e2d\u5b9e\u73b0\u3002\u5728web\u73af\u5883\u4e2d\uff0cWebAssembly\u5c06\u4f1a\u4e25\u683c\u9075\u5b88\u540c\u6e90\u7b56\u7565\u4ee5\u53ca\u6d4f\u89c8\u5668\u5b89\u5168\u7b56\u7565\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5f00\u53d1",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"WebAssembly \u8bbe\u8ba1\u4e86\u4e00\u4e2a\u975e\u5e38\u89c4\u6574\u7684\u6587\u672c\u683c\u5f0f\u7528\u6765\u3001\u8c03\u8bd5\u3001\u6d4b\u8bd5\u3001\u5b9e\u9a8c\u3001\u4f18\u5316\u3001\u5b66\u4e60\u3001\u6559\u5b66\u6216\u8005\u7f16\u5199\u7a0b\u5e8f\u3002\u53ef\u4ee5\u4ee5\u8fd9\u79cd\u6587\u672c\u683c\u5f0f\u5728web\u9875\u9762\u4e0a\u67e5\u770bwasm\u6a21\u5757\u7684\u6e90\u7801"))),(0,r.kt)("li",{parentName:"ul"},"\u6807\u51c6",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"WebAssembly \u5728 web \u4e2d\u88ab\u8bbe\u8ba1\u6210\u65e0\u7248\u672c\u3001\u7279\u6027\u53ef\u6d4b\u8bd5\u3001\u5411\u540e\u517c\u5bb9\u7684\u3002WebAssembly \u53ef\u4ee5\u88ab JavaScript \u8c03\u7528\uff0c\u8fdb\u5165 JavaScript \u4e0a\u4e0b\u6587\uff0c\u4e5f\u53ef\u4ee5\u50cf Web API \u4e00\u6837\u8c03\u7528\u6d4f\u89c8\u5668\u7684\u529f\u80fd\u3002\u5f53\u7136\uff0cWebAssembly \u4e0d\u4ec5\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u8fd0\u884c\u5728\u975eweb\u73af\u5883\u4e0b")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wasm",src:t(2611).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wasm",src:t(4312).Z})),(0,r.kt)("h2",{id:"\u7f16\u8bd1-wasm-\u7684\u5de5\u5177"},"\u7f16\u8bd1 wasm \u7684\u5de5\u5177"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"AssemblyScript\uff1a\u652f\u6301\u76f4\u63a5\u5c06 TypeScript \u7f16\u8bd1\u6210 WebAssembly\u3002\u8fd9\u5bf9\u4e8e\u524d\u7aef\u6765\u8bf4\uff0c\u5165\u95e8\u7684\u95e8\u69db\u5f88\u4f4e\u7684\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Emscripten\uff1a\u53ef\u4ee5\u8bf4\u662f WebAssembly \u7684\u7075\u9b42\u5de5\u5177\u3002\u5c06\u5176\u4ed6\u7684\u9ad8\u7ea7\u8bed\u8a00\uff0c\u7f16\u8bd1\u6210WebAssembly\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"WABT\uff1a\u5c06 WebAssembly\u5728\u5b57\u8282\u7801\u548c\u6587\u672c\u683c\u5f0f\u76f8\u4e92\u8f6c\u6362\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u53bb\u7406\u89e3\u8fd9\u4e2a wasm \u5230\u5e95\u662f\u5728\u505a\u4ec0\u4e48\u4e8b\u3002"))),(0,r.kt)("h2",{id:"\u6027\u80fd\u5bf9\u6bd4"},"\u6027\u80fd\u5bf9\u6bd4"),(0,r.kt)("p",null,"WebAssembly\u7248\u672c\u548c\u539f\u751fJavaScript\u7248\u672c\u7684\u9012\u5f52\u65e0\u4f18\u5316\u7684 (\u6590\u6ce2\u90a3\u5951\u6570\u5217)Fibonacci \u51fd\u6570\uff0c\u4e0b\u56fe\u662f\u8fd9\u4e24\u4e2a\u51fd\u6570\u5728\u503c\u662f45\u300148\u300150\u7684\u65f6\u5019\u7684\u6027\u80fd\u5bf9\u6bd4\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wasm",src:t(9907).Z})),(0,r.kt)("h2",{id:"javascript-api"},"JavaScript API"),(0,r.kt)("h3",{id:"\u65b9\u6cd5"},"\u65b9\u6cd5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"WebAssembly.compile()"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.instantiate()"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.validate()")),(0,r.kt)("h3",{id:"\u7c7b"},"\u7c7b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"WebAssembly.Module"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.Instance"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.Memory"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.Table"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.CompileError"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.LinkError"),(0,r.kt)("li",{parentName:"ul"},"WebAssembly.RuntimeError")),(0,r.kt)("h3",{id:"\u5177\u4f53\u6d41\u7a0b"},"\u5177\u4f53\u6d41\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// WebAssembly.compile() \u88c5\u8f7d wasm\nPromise<WebAssembly.Module> WebAssembly.compile(bufferSource);\n\n// WebAssembly.Module \u8f6c\u6362\u4e3a module\nvar myModule = new WebAssembly.Module(bufferSource);\n\n// WebAssembly.instantiate() \u5b9e\u4f8b\u5316\nPromise<ResultObject> WebAssembly.instantiate(bufferSource, importObj) // ResultObject:{module, instance}\n\n\nPromise<WebAssembly.Instance> WebAssembly.instantiate(module, importObject);\n\n// WebAssembly.Instance\nvar myInstance = new WebAssembly.Instance(module, importObject);\n\n// WebAssembly.validate() \u9a8c\u8bc1\n\n// WebAssembly.validate(bufferSource); // boolean\n\n// WebAssembly.Memory \u53ef\u7528\u4e8e JavaScript \u548c WebAssembly \u7684\u6570\u636e\u5171\u4eab(\u4e0d\u5728 v8 \u4e2d\uff0c\u81ea\u5df1\u7684\u5185\u5b58\u56de\u6536\u4f53\u7cfb)\n// \u53ef\u4ee5\u4f7f\u7528JS\u521b\u5efa\uff0c\u4f20\u9012\u7ed9 WASM\n// \u53ef\u4ee5\u5728WASM\u91cc\u521b\u5efa\uff0c\u4f7f\u7528JS\u83b7\u53d6\n\n// WebAssembly.Table \u53ef\u4ee5\u7528\u6765\u5728JS\u5bf9\u8c61\u4e0a\u5b58\u653eWASM\u51fd\u6570\u7684\u5f15\u7528\n\n// \u9519\u8bef\n// WebAssembly.CompileError\n// WebAssembly.LinkError\n// WebAssembly.RuntimeError\n")),(0,r.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"import module from 'test.wasm'")," js \u53ea\u80fd\u901a\u8fc7\u8bf7\u6c42\u53d1\u8d77\u3002webpack 5 \u652f\u6301\u5bfc\u5165"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const importObject = {\n func: {\n    log: (num)=> document.write(num)\n    }\n}\nfetch('test.wasm')\n    .then( response => response.arrayBuffer())\n    .then( types => WebAssembly.instantiate(bytes, importObject))\n    .then(({instance}) => window.test = instance.exports.test)\n")),(0,r.kt)("h3",{id:"\u6267\u884c\u6d41\u7a0b"},"\u6267\u884c\u6d41\u7a0b"),(0,r.kt)("p",null,"\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684"),(0,r.kt)("p",null,"JavaScript -> WebAssembly(test) -> JavaScript(document.write())"),(0,r.kt)("h2",{id:"\u53c2\u8003\u94fe\u63a5"},"\u53c2\u8003\u94fe\u63a5"),(0,r.kt)("p",null,"\u6784\u5efawasm\u65b9\u5f0f"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/WebAssembly/wabt"},"\u5efa\u8bae\u5f03\u5751 \u4f7f\u7528WABT\u6765\u7f16\u8bd1S-\u8868\u8fbe\u5f0f")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://emscripten.org/docs/getting_started/downloads.html"},"\u63a8\u8350\u7f16\u8bd1\u5de5\u5177 Emscripten")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://wasdk.github.io/WasmFiddle/"},"\u5728\u7ebf\u65b9\u5f0f WasmFiddle")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://webassembly.org.cn"},"WebAssembly \u4e2d\u6587\u7f51")),(0,r.kt)("h3",{id:"emscripten"},"Emscripten"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/HondryTravis/emsdk"},"emsdk")," \u6784\u5efa ",(0,r.kt)("a",{parentName:"p",href:"https://www.it610.com/article/1282220241333534720.htm"},"\u53c2\u8003\u6587\u6863")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# mac \u5e73\u53f0\u76f4\u63a5\u6267\u884c\u53ef\u6267\u884c\u6587\u4ef6  window \u81ea\u884c\u767e\u5ea6 or ./emsdk.bat\n./emsdk install latest\n./emsdk activate latest\n")),(0,r.kt)("p",null,"\u914d\u7f6e\u73af\u5883\u53d8\u91cf"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# mac \u5e73\u53f0\uff0c window \u5e73\u53f0\u81ea\u884c\u4f53\u4f1a emsdk_env.bat\nsource ./emsdk_env.sh\n")),(0,r.kt)("h3",{id:"\u7f16\u8bd1\u65b9\u5f0f"},"\u7f16\u8bd1\u65b9\u5f0f"),(0,r.kt)("p",null,"1\u3001\u53ef\u6267\u884c\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"gcc hello.c -o hello\n# \u6267\u884c\n./hello\n")),(0,r.kt)("p",null,"2\u3001\u7f16\u8bd1\u6210wasm\u5728nodejs\u4e2d\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"emcc hello.c -o hello_node.js\n\n# \u751f\u6210\u4e24\u4e2a\u6587\u4ef6\n=> hello_node.wasm\n=> hello_node.js\n\n# \u6267\u884c\nnode hello_node.js\n")),(0,r.kt)("p",null,"3\u3001\u7f16\u8bd1\u6210wasm\u5728\u6d4f\u89c8\u5668\u4e2d\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5176\u4e2d -s WASM=1 \u662f\u5236\u5b9a\u8981wasm\u6587\u4ef6\uff1b -O3 \u4f18\u5316\u9009\u9879 \uff0c\u4f18\u5316\u9009\u9879\u4e2d\u4f18\u5316\u5ea6\u6700\u4f4e\u662fO1\uff0c\u4f18\u5316\u5ea6\u6700\u9ad8\u662fO3,\u6700\u597d\u63a8\u8350 O1\uff0c\u907f\u514d\u610f\u5916\u4f18\u5316\nemcc hello.c -s WASM=1 -O3 -o hello_html.html\n\n# \u751f\u6210\u4e09\u4e2a\u6587\u4ef6\n=> hello_html.wasm\n=> hello_html.js\n=> hello_html.html\n\n# \u6267\u884c\n# \u5728\u6d4f\u89c8\u5668\u4e2d\u6267\u884c\uff0c\u6ce8\u610f\uff0c\u751f\u6210\u7684\u6587\u4ef6\u8981\u653e\u5728web\u670d\u52a1\u5668\u4e2d\u7136\u540e\u901a\u8fc7 web \u8bbf\u95ee\uff0c\u4e0d\u80fd\u76f4\u63a5\u4ece\u786c\u76d8\u8bbf\u95ee\n\n")),(0,r.kt)("p",null,"\u6d4b\u8bd5 Math.c \u6587\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/y-y-y-y/p/9897154.html"},"\u53c2\u8003\u94fe\u63a5")),(0,r.kt)("h2",{id:"q--a"},"Q & A"),(0,r.kt)("p",null,"math.c / mathcpp.cpp"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int add( int a, int b)\n{\n    return a + b;\n}\n\nint reducer(int a, int b) { \n    return a - b;\n}\n\nint square(int a)\n{\n    return a * a;\n}\n")),(0,r.kt)("p",null,"sh"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# math.c\nemcc math.c -Os -s WASM=1 -s SIDE_MODULE=1 -o math.wasm\n# mathcpp.cpp\nemcc math.cpp -Os -s WASM=1 -s SIDE_MODULE=1 -o mathcpp.wasm\n")),(0,r.kt)("p",null,"html"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<script>\n    /**\n     * @param {String} path wasm \u6587\u4ef6\u8def\u5f84\n     * @param {Object} imports \u4f20\u9012\u5230 wasm \u4ee3\u7801\u4e2d\u7684\u53d8\u91cf\n     */\n    function loadWebAssembly(path, imports = {}) {\n      return fetch(path) // \u52a0\u8f7d\u6587\u4ef6\n        .then(response => response.arrayBuffer()) // \u8f6c\u6210 ArrayBuffer\n        .then(buffer => WebAssembly.compile(buffer))\n        .then(module => {\n          imports.env = imports.env || {}\n\n          // \u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4\n          imports.env.memoryBase = imports.env.memoryBase || 0\n          if (!imports.env.memory) {\n            imports.env.memory = new WebAssembly.Memory({ initial: 256 })\n          }\n\n          // \u521b\u5efa\u53d8\u91cf\u6620\u5c04\u8868\n          imports.env.tableBase = imports.env.tableBase || 0\n          if (!imports.env.table) {\n            // \u5728 MVP \u7248\u672c\u4e2d element \u53ea\u80fd\u662f \"anyfunc\"\n            imports.env.table = new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n          }\n          console.log(module)\n          // \u521b\u5efa WebAssembly \u5b9e\u4f8b\n          return new WebAssembly.Instance(module, imports)\n        })\n    }\n    //\u8c03\u7528\n    loadWebAssembly('./mathcpp.wasm')\n      .then(instance => {\n        console.log(instance.exports)\n        // const add = instance.exports.add // \u53d6\u51facpp\u91cc\u9762\u7684\u65b9\u6cd5\n        // const square = instance.exports.square // \u53d6\u51facpp\u91cc\u9762\u7684\u65b9\u6cd5\n        // const reducer = instance.exports.reducer\n\n        // console.log('10 + 20 =', add(10, 20))\n        // console.log('3*3 =', square(3))\n        // console.log('10-5 =', reducer(10, 5))\n        // console.log('(2 + 5)*2 =', square(add(2 + 5)))\n      })\n\n  <\/script>\n")))}u.isMDXComponent=!0},2611:function(e,n,t){n.Z=t.p+"assets/images/index1-39bfbcd57bf2271abe41deb7b188764c.png"},4312:function(e,n,t){n.Z=t.p+"assets/images/index2-158a665ce817ddb5162149a345e24c8d.png"},9907:function(e,n,t){n.Z=t.p+"assets/images/index3-58a81eff34aad41aa763a87a1d518deb.png"}}]);